# microservices-workspace-ms-demo-node

Demo microservice in Node, for [Microservices Workspace demo project](https://github.com/inadarei/microservices-workspace)

This is a skeleton of a containerized microservice generated by [Node Bootstrap](http://nodebootstrap.io)

## Developing code in local workspace

**Please note:** we follow the philosophy of clean separation between "build" and
"run" stages. 

In the build stage, the `Dockerfile` is used to build the container image and
bring it to a state where it can be run by any execution environment (such as:
Swarm, Kubernetes, ECR, etc.) given that the environment will also contextualize 
it using appropriate environmental variables.

In the run stage execution environment runs the container image built by the
Dockerfile. For local development docker-compose.yml takes the role of the
executor. it is the simplest solution for the task and we prefer keeping things
simple, locally. 

Please note that in the local environment code hot-reloading is turned on, so
there is no need to restart the container as you develop code, just edit the
corresponding files and enjoy the experience!

## Run/Stop container:

```
# run:
> npm start

# stop:
> npm stop

# clean rebuild:
> npm run clean
```

Inspecting health of the containers: 

```
> docker-compose ps
```

## Monitoring Logs:

```
> npm run logs
```

## Installing a new packagey

Installing a package:

```
npm run install-package <packagename>
```

Install a package in dev-dependencies:

```
npm run install-dev-package <packagename>
```

## Database Migrations (Currently: MySQL)

```
# Create migration:
> npm run migration-create <migration-name>
# e.g.: 
> npm run migration-create create-users-table
# Run migrations:
> npm run migrate
```

## Accessing the microservice:

http://localhost:7702/

## Running Automated Tests

1. Make sure the microservice is up (if not: run `npm run clean` and `npm start`)
2. Run: `npm run test`

## License

[MIT](LICENSE)